{
    images: [
        {
            name: "quarter_res_depth",
            lod: 2,
            internalFormat: "R32F",
            pixelFormat: "RGBA",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR_MIPMAP_NEAREST"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "sort",
            lod: 0,
            internalFormat: "RGBA16F",
            pixelFormat: "RGBA",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "global_illumination",
            lod: 0,
<<<<<<< Updated upstream
            internalFormat: "RGBA32F",
            pixelFormat: "RGBA",
=======
            internalFormat: "R11F_G11F_B10F",
            pixelFormat: "RGB",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "previous_reflection",
            lod: 0,
            internalFormat: "R11F_G11F_B10F",
            pixelFormat: "RGB",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "diffuse",
            lod: 0,
            internalFormat: "R11F_G11F_B10F",
            pixelFormat: "RGB",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "previous_diffuse",
            lod: 0,
            internalFormat: "R11F_G11F_B10F",
            pixelFormat: "RGB",
>>>>>>> Stashed changes
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "final_lighting",
            lod: 0,
            internalFormat: "RGBA32F",
            pixelFormat: "RGBA",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "global_illumination_copy",
            lod: 0,
            internalFormat: "RGBA32F",
            pixelFormat: "RGBA",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "success_dir",
            lod: 0,
            internalFormat: "RGBA32F",
            pixelFormat: "RGBA",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
        {
            name: "success_dir_copy",
            lod: 0,
            internalFormat: "RGBA32F",
            pixelFormat: "RGBA",
            pixelDataType: "UNSIGNED_BYTE",
            target: "TEXTURE_2D",
            texParams: [
                {
                    name: "TEXTURE_MIN_FILTER", val: "LINEAR"
                }, 
                {
                    name: "TEXTURE_MAG_FILTER", val: "LINEAR"
                },
                {
                    name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
                }, 
                {
                    name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
                }
            ]
        },
    ],

    framebuffers: [
        {
            name: "depth_d0",
            colorAttachments: [
                {
                    image: "quarter_res_depth"
                }
            ]
        },
        {
            name: "depth_d1",
            colorAttachments: [
                {
                    image: "quarter_res_depth", lod: 1
                }
            ]
        },
        {
            name: "depth_d2",
            colorAttachments: [
                {
                    image: "quarter_res_depth", lod: 2
                }
            ]
        },
        {
            name: "sort",
            colorAttachments: [
                {
<<<<<<< Updated upstream
                    image: "sort", clearColor: 0x00000000
                },
                {
                    image: "global_illumination", clearColor: 0x00000000
                },
                {
                    image: "success_dir", clearColor: 0x00000000
                },
                {
                    image: "final_lighting", clearColor: 0x00000000
=======
                    image: "deferred_solid", clearColor: 0x00000000
                },
                {
                    image: "diffuse", clearColor: 0x00000000
>>>>>>> Stashed changes
                }
            ]
        },
        {
            name: "copy_to_main",
            colorAttachments: [
                {
                    image: "main_color", clearColor: 0x00000000
                }
            ]
        }
        {
            name: "gi",
            colorAttachments: [
                {
<<<<<<< Updated upstream
                    image: "global_illumination", clearColor: 0x00000000
=======
                    image: "sort", clearColor: 0x00000000
                },
                {
                    image: "previous_reflection", clearColor: 0x00000000
                },
                {
                    image: "previous_diffuse", clearColor: 0x00000000
>>>>>>> Stashed changes
                }
            ]
        }
        {
            name: "gi_copy",
            colorAttachments: [
                {
                    image: "global_illumination_copy", clearColor: 0x00000000
                },
                {
                    image: "success_dir_copy", clearColor: 0x00000000
                }
            ]
        }
    ],

    programs: [
        {
            name: "depth_downsample",
            vertexSource: "forgetmenot:shaders/post/frame_full.vert",
            fragmentSource: "forgetmenot:shaders/post/fabulous/depth_downsample.frag",
            samplers: [
                "u_depth"
            ]
        },
        {
<<<<<<< Updated upstream
=======
            name: "deferred_solid",
            vertexSource: "forgetmenot:shaders/post/fabulous/sort_vertex.vert",
            fragmentSource: "forgetmenot:shaders/post/fabulous/deferred_solid.frag",
            samplers: [
                "u_main_color",
                "u_previous_color",
                "u_translucent_depth",
                "u_particles_depth",
                
                "u_solid_normal",
                "u_pbr_data",
                "u_material_data",
                "u_light_data",

                "u_depth_mipmaps",
                "u_depth_no_player",
                "u_blue_noise",

                "u_shadow_map",
                "u_shadow_tex",

                "u_previous_color"
            ]
        },
        {
            name: "reflection_coord",
            vertexSource: "forgetmenot:shaders/post/fabulous/sort_vertex.vert",
            fragmentSource: "forgetmenot:shaders/post/fabulous/reflection_coord.frag",
            samplers: [
                "u_normal",
                "u_pbr_data",

                "u_depth_mipmaps",
                "u_previous_color",
                "u_previous_reflection"
            ]
        },
        {
>>>>>>> Stashed changes
            name: "sort",
            vertexSource: "forgetmenot:shaders/post/frame_full.vert",
            fragmentSource: "forgetmenot:shaders/post/fabulous/sort.frag",
            samplers: [
                "u_main_color",
                "u_main_depth",
                "u_translucent_color",
                "u_translucent_depth",
                "u_entity_color",
                "u_entity_depth",
                "u_weather_color",
                "u_weather_depth",
                "u_clouds_color",
                "u_clouds_depth",
                "u_particles_color",
                "u_particles_depth",
                "u_translucent_data",
                "u_solid_data"
                
                "u_normal",
                "u_translucent_vertex_normal",
                "u_pbr_data",
                "u_previous_frame",
<<<<<<< Updated upstream
                "u_depth_mipmaps",
                "u_blue_noise",
                "u_global_illumination_copy",
                "u_success_dir_copy",
                "u_processed_color",
=======
                "u_composited_mips",
                "u_reflection_coord",
                "u_diffuse"
>>>>>>> Stashed changes

                "u_shadow_map"
            ]
        },
        {
            name: "copy_gi",
            vertexSource: "forgetmenot:shaders/post/frame_full.vert",
            fragmentSource: "forgetmenot:shaders/post/fabulous/copy_gi.frag",
            samplers: [
                "u_global_illumination",
                "u_success_dir"
            ]
        }
        {
            name: "copy",
            vertexSource: "forgetmenot:shaders/post/frame_full.vert",
            fragmentSource: "forgetmenot:shaders/post/fabulous/copy.frag",
            samplers: [
                "u_composite",
            ]
        }
    ],

    fabulous: {
        passes: [
            {
                name: "depth_d0",
                program: "depth_downsample",
                framebuffer: "depth_d0",
                samplerImages: [
                    "translucent_depth"
                ]
            },
            {
                name: "depth_d1",
                program: "depth_downsample",
                framebuffer: "depth_d1",
                samplerImages: [
                    "quarter_res_depth"
                ],
                lod: 1
            },
            {
                name: "depth_d2",
                program: "depth_downsample",
                framebuffer: "depth_d2",
                samplerImages: [
                    "quarter_res_depth"
                ],
                lod: 2
            },
<<<<<<< Updated upstream
            // {
            //     name: "gi_copy",
            //     program: "copy",
            //     framebuffer: "copy_to_main",
            //     samplerImages: [
            //         "sort"
            //     ]
            // }
=======
            {
                name: "deferred_solid",
                program: "deferred_solid",
                framebuffer: "deferred_solid",
                samplerImages: [
                    "main_color",
                    "taa",
                    "translucent_depth",
                    "particles_depth",

                    "solid_normal",
                    "pbr_data",
                    "material_data",
                    "light_data",

                    "quarter_res_depth",
                    "depth_no_player"
                    "forgetmenot:textures/blue_noise.png",
                    
                    "shadow_map",
                    "shadow_map",

                    "previous_diffuse"
                ]
            },
            {
                name: "reflection_coord",
                program: "reflection_coord",
                framebuffer: "reflection_coord",
                samplerImages: [
                    "composite_normal",
                    "pbr_data",

                    "quarter_res_depth",
                    "taa",
                    "previous_reflection"
                ]
            },
>>>>>>> Stashed changes
            {
                name: "sort",
                program: "sort",
                framebuffer: "sort",
                samplerImages: [
                    "main_color",
                    "main_depth",
                    "translucent_color",
                    "translucent_depth",
                    "entity_color",
                    "entity_depth",
                    "weather_color",
                    "weather_depth",
                    "clouds_color",
                    "clouds_depth",
                    "particles_color",
                    "particles_depth",
                    "translucent_data",
                    "main_data",

                    "composite_normal",
                    "translucent_vertex_normal",
                    "pbr_data",
<<<<<<< Updated upstream
                    "taa",
                    "quarter_res_depth",
                    "forgetmenot:textures/blue_noise.png",
                    "global_illumination_copy",
                    "success_dir_copy",
                    "bloom_upsample"
=======

                    "bloom_downsample",
                    "bloom_upsample",
                    "reflection_coord",
                    "diffuse"
>>>>>>> Stashed changes
                    
                    "shadow_map"
                ]
            },
            {
                name: "copy_gi",
                program: "copy_gi",
                framebuffer: "gi_copy",
                samplerImages: [
                    "global_illumination",
                    "success_dir"
                ]
            }
            {
                name: "copy",
                program: "copy",
                framebuffer: "copy_to_main",
                samplerImages: [
                    "sort"
                ]
            }
        ]
    }
}