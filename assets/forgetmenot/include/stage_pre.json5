{
	images: [
		{
			name: "transmittance_lut",
			lod: 0,
			width: 256,
			height: 64,
			internalFormat: "RGB16",
			pixelFormat: "RGBA",
			pixelDataType: "UNSIGNED_BYTE",
			target: "TEXTURE_2D",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR"
				}, 
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				}, 
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				}
			]
		},
		{
			name: "transmittance_lut_copy",
			lod: 0,
			width: 1,
			height: 1,
			internalFormat: "RGB8",
			pixelFormat: "RGBA",
			pixelDataType: "UNSIGNED_BYTE",
			target: "TEXTURE_2D",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR"
				}, 
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				}, 
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				}
			]
		},
		{
			name: "multiscattering_lut",
			lod: 0,
			width: 32,
			height: 32,
			internalFormat: "RGB16",
			pixelFormat: "RGBA",
			pixelDataType: "UNSIGNED_BYTE",
			target: "TEXTURE_2D",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR"
				}, 
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				}, 
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				}
			]
		},
		{
			name: "sky_lut",
			lod: 0,
			width: 200,
			height: 200,
			internalFormat: "RGB16",
			pixelFormat: "RGBA",
			pixelDataType: "UNSIGNED_BYTE",
			target: "TEXTURE_2D",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR"
				}, 
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				}, 
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				}
			]
		},
		{
			name: "sky_lut_night",
			lod: 0,
			width: 200,
			height: 200,
			internalFormat: "RGB16",
			pixelFormat: "RGBA",
			pixelDataType: "UNSIGNED_BYTE",
			target: "TEXTURE_2D",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR"
				}, 
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				}, 
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				}
			]
		},
		{
			name: "clouds",
			lod: 0,
			internalFormat: "RG16",
			pixelFormat: "RG",
			pixelDataType: "UNSIGNED_BYTE",
			width: 512,
			height: 512,
			target: "TEXTURE_CUBE_MAP",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				},
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				},
				{
					name: "TEXTURE_WRAP_R", val: "CLAMP_TO_EDGE"
				}
			]
		},
		{
			name: "skybox",
			lod: 10,
			internalFormat: "R11F_G11F_B10F",
			pixelFormat: "RGBA",
			pixelDataType: "UNSIGNED_BYTE",
			size: 1024,
			target: "TEXTURE_CUBE_MAP",
			texParams: [
				{
					name: "TEXTURE_MIN_FILTER", val: "LINEAR_MIPMAP_LINEAR"
				},
				{
					name: "TEXTURE_MAG_FILTER", val: "LINEAR"
				},
				{
					name: "TEXTURE_WRAP_S", val: "CLAMP_TO_EDGE"
				},
				{
					name: "TEXTURE_WRAP_T", val: "CLAMP_TO_EDGE"
				},
				{
					name: "TEXTURE_WRAP_R", val: "CLAMP_TO_EDGE"
				}
			]
		},
	],

	framebuffers: [
		{
			name: "transmittance_lut",
			colorAttachments: [
				{
					image: "transmittance_lut", lod: 0
				}
			]
		},
		{
			name: "multiscattering_lut",
			colorAttachments: [
				{
					image: "multiscattering_lut", lod: 0
				}
			]
		},
		{
			name: "sky_lut",
			colorAttachments: [
				{
					image: "sky_lut", lod: 0
				},
				{
					image: "sky_lut_night", lod: 0
				}
			]
		},
		{
			name: "transmittance_lut_copy",
			colorAttachments: [
				{
					image: "transmittance_lut_copy", lod: 0
				}
			]
		},
		{
			name: "clouds",
			colorAttachments: [
				{image: "clouds", layer: 0},
				{image: "clouds", layer: 1},
				{image: "clouds", layer: 2},
				{image: "clouds", layer: 3},
				{image: "clouds", layer: 4},
				{image: "clouds", layer: 5},
			]
		},
		{
			name: "skybox",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 0},
				{image: "skybox", layer: 1, lod: 0},
				{image: "skybox", layer: 2, lod: 0},
				{image: "skybox", layer: 3, lod: 0},
				{image: "skybox", layer: 4, lod: 0},
				{image: "skybox", layer: 5, lod: 0},
			]
		},
		{
			name: "skybox_d1",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 1},
				{image: "skybox", layer: 1, lod: 1},
				{image: "skybox", layer: 2, lod: 1},
				{image: "skybox", layer: 3, lod: 1},
				{image: "skybox", layer: 4, lod: 1},
				{image: "skybox", layer: 5, lod: 1},
			]
		},
		{
			name: "skybox_d2",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 2},
				{image: "skybox", layer: 1, lod: 2},
				{image: "skybox", layer: 2, lod: 2},
				{image: "skybox", layer: 3, lod: 2},
				{image: "skybox", layer: 4, lod: 2},
				{image: "skybox", layer: 5, lod: 2},
			]
		},
		{
			name: "skybox_d3",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 3},
				{image: "skybox", layer: 1, lod: 3},
				{image: "skybox", layer: 2, lod: 3},
				{image: "skybox", layer: 3, lod: 3},
				{image: "skybox", layer: 4, lod: 3},
				{image: "skybox", layer: 5, lod: 3},
			]
		},
		{
			name: "skybox_d4",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 4},
				{image: "skybox", layer: 1, lod: 4},
				{image: "skybox", layer: 2, lod: 4},
				{image: "skybox", layer: 3, lod: 4},
				{image: "skybox", layer: 4, lod: 4},
				{image: "skybox", layer: 5, lod: 4},
			]
		},
		{
			name: "skybox_d5",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 5},
				{image: "skybox", layer: 1, lod: 5},
				{image: "skybox", layer: 2, lod: 5},
				{image: "skybox", layer: 3, lod: 5},
				{image: "skybox", layer: 4, lod: 5},
				{image: "skybox", layer: 5, lod: 5},
			]
		},
		{
			name: "skybox_d6",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 6},
				{image: "skybox", layer: 1, lod: 6},
				{image: "skybox", layer: 2, lod: 6},
				{image: "skybox", layer: 3, lod: 6},
				{image: "skybox", layer: 4, lod: 6},
				{image: "skybox", layer: 5, lod: 6},
			]
		},
		{
			name: "skybox_d7",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 7},
				{image: "skybox", layer: 1, lod: 7},
				{image: "skybox", layer: 2, lod: 7},
				{image: "skybox", layer: 3, lod: 7},
				{image: "skybox", layer: 4, lod: 7},
				{image: "skybox", layer: 5, lod: 7},
			]
		},
		{
			name: "skybox_d8",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 8},
				{image: "skybox", layer: 1, lod: 8},
				{image: "skybox", layer: 2, lod: 8},
				{image: "skybox", layer: 3, lod: 8},
				{image: "skybox", layer: 4, lod: 8},
				{image: "skybox", layer: 5, lod: 8},
			]
		},
		{
			name: "skybox_d9",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 9},
				{image: "skybox", layer: 1, lod: 9},
				{image: "skybox", layer: 2, lod: 9},
				{image: "skybox", layer: 3, lod: 9},
				{image: "skybox", layer: 4, lod: 9},
				{image: "skybox", layer: 5, lod: 9},
			]
		},
		{
			name: "skybox_d10",
			colorAttachments: [
				{image: "skybox", layer: 0, lod: 10},
				{image: "skybox", layer: 1, lod: 10},
				{image: "skybox", layer: 2, lod: 10},
				{image: "skybox", layer: 3, lod: 10},
				{image: "skybox", layer: 4, lod: 10},
				{image: "skybox", layer: 5, lod: 10},
			]
		},
	],

	programs: [
		{
			name: "copy",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/post/copy.frag",
			samplers: [
				"u_color"
			]
		},
		{
			name: "transmittance_lut",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/pre/gen/transmittance.frag",
			samplers: [
				"u_transmittance_copy"
			]
		},
		{
			name: "multiscattering_lut",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/pre/gen/multiscattering.frag",
			samplers: [
				"u_transmittance",
				"u_transmittance_copy"
			]
		},
		{
			name: "sky_lut",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/pre/gen/sky.frag",
			samplers: [
				"u_transmittance",
				"u_multiscattering",
			]
		},
		{
			name: "clouds",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/pre/clouds.frag",
			samplers: [
			]
		},
		{
			name: "skybox",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/pre/skybox.frag",
			samplers: [
				"u_sky",
				"u_sky_night",
				"u_transmittance",
				"u_clouds",

				"u_end_sky"
			]
		},
		{
			name: "cube_downsample",
			vertexSource: "forgetmenot:shaders/post/frame_full.vert",
			fragmentSource: "forgetmenot:shaders/pre/cube_downsample.frag",
			samplers: [
				"u_cube"
			]
		},
	],

	beforeWorldRender: {
		passes: [
			{
				name: "clear_main_gbuffer",
				framebuffer: "main_gbuffer",
				program: "frex_clear",
			},
			{
				name: "clear_translucent_gbuffer",
				framebuffer: "translucent_gbuffer",
				program: "frex_clear"
			},
			{
				name: "clear_entity_gbuffer",
				framebuffer: "entity_gbuffer",
				program: "frex_clear"
			},
			{
				name: "clear_weather_gbuffer",
				framebuffer: "weather_gbuffer",
				program: "frex_clear"
			},
			{
				name: "clear_clouds_gbuffer",
				framebuffer: "clouds_gbuffer",
				program: "frex_clear"
			},
			{
				name: "clear_particles_gbuffer",
				framebuffer: "particles_gbuffer",
				program: "frex_clear"
			},
			{
				name: "transmittance_lut_copy",
				program: "copy",
				framebuffer: "transmittance_lut_copy",
				width: 1,
				height: 1,
				samplerImages: [
					"transmittance_lut"
				]
			},
			{
				name: "transmittance_lut",
				program: "transmittance_lut",
				framebuffer: "transmittance_lut",
				width: 256,
				height: 64,
				samplerImages: [
					"transmittance_lut_copy"
				]
			},
			{
				name: "multiscattering_lut",
				program: "multiscattering_lut",
				framebuffer: "multiscattering_lut",
				width: 32,
				height: 32,
				samplerImages: [
					"transmittance_lut",
					"transmittance_lut_copy"
				]
			},
			{
				name: "sky_lut",
				program: "sky_lut",
				framebuffer: "sky_lut",
				width: 200,
				height: 200,
				samplerImages: [
					"transmittance_lut",
					"multiscattering_lut"
				]
			},
			{
				name: "clouds",
				program: "clouds",
				framebuffer: "clouds",
				width: 512,
				height: 512,
				samplerImages: [
				]
			},
			{
				name: "skybox",
				program: "skybox",
				framebuffer: "skybox",
				width: 1024,
				height: 1024,
				lod: 0,
				samplerImages: [
					"sky_lut",
					"sky_lut_night",
					"transmittance_lut",
					"clouds",

					"forgetmenot:textures/end_sky.png"
				]
			},
			{
				name: "skybox_d1",
				program: "cube_downsample",
				framebuffer: "skybox_d1",
				width: 1024,
				height: 1024,
				lod: 1,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d2",
				program: "cube_downsample",
				framebuffer: "skybox_d2",
				width: 1024,
				height: 1024,
				lod: 2,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d3",
				program: "cube_downsample",
				framebuffer: "skybox_d3",
				width: 1024,
				height: 1024,
				lod: 3,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d4",
				program: "cube_downsample",
				framebuffer: "skybox_d4",
				width: 1024,
				height: 1024,
				lod: 4,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d5",
				program: "cube_downsample",
				framebuffer: "skybox_d5",
				width: 1024,
				height: 1024,
				lod: 5,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d6",
				program: "cube_downsample",
				framebuffer: "skybox_d6",
				width: 1024,
				height: 1024,
				lod: 6, 
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d7",
				program: "cube_downsample",
				framebuffer: "skybox_d7",
				width: 1024,
				height: 1024,
				lod: 7, 
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d8",
				program: "cube_downsample",
				framebuffer: "skybox_d8",
				width: 1024,
				height: 1024,
				lod: 8,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d9",
				program: "cube_downsample",
				framebuffer: "skybox_d9",
				width: 1024,
				height: 1024,
				lod: 9,
				samplerImages: [
					"skybox"
				]
			},
			{
				name: "skybox_d10",
				program: "cube_downsample",
				framebuffer: "skybox_d10",
				width: 1024,
				height: 1024,
				lod: 10,
				samplerImages: [
					"skybox"
				]
			}
		]
	},
}